import{d as h,C as V,D as T,y,r as b,o as u,c as d,b as l,E as k,a as s,w as S,u as a,G as M,H as P,I as H,_ as g,J as $,j as D,B as j,K as z,L as O,M as W,N as A,O as B,P as G,Q as L,R as J,S as K,A as E}from"./index-CorONKRg.js";import{H as Q}from"./Header-ELIlbt4d.js";import{d as U}from"./vuedraggable.umd-BknzrOQK.js";import{e as N}from"./eventBus-E5P-NQ8u.js";import{u as w}from"./useEditor-CEeZLYcK.js";import{u as q}from"./hooks-pbYTGw1V.js";import{E as F,d as X}from"./dispatch-CyYR06Ry.js";import"./material-BFAZqrzv.js";const Y={class:"left-side-container flex"},Z={class:"tabs"},ee=h({__name:"Index",setup(x){const e=V(),i=T(),r=y(()=>i.name),t=i.params.id,p=()=>{t?e.push(`/editor/${t}/survey-type`):e.push("/editor/survey-type")},n=()=>{t?e.push(`/editor/${t}/outline`):e.push("/editor/outline")};return(_,c)=>{const v=b("el-icon"),o=b("router-view");return u(),d("div",Y,[l("div",Z,[l("div",{class:k(["tab-item",{"tab-show":r.value==="survey-type"}]),onClick:p},[s(v,null,{default:S(()=>[s(a(M))]),_:1}),c[1]||(c[1]=l("span",{class:"tab-item-title mt-5"},"题型",-1))],2),l("div",{class:k(["tab-item",{"tab-show":r.value==="outline"}]),onClick:n},[s(v,null,{default:S(()=>[s(a(P))]),_:1}),c[2]||(c[2]=l("span",{class:"tab-item-title mt-5"},"大纲",-1))],2)]),s(o,{class:"tab-pane",onWheel:c[0]||(c[0]=m=>a(H)(m))})])}}}),te=g(ee,[["__scopeId","data-v-e4733915"]]),oe=["onClick"],ne={class:"absolute delete-btn"},se=h({__name:"Center",setup(x){const e=w(),i=y(()=>q(e.coms).value),r=$(null),t=$([]),p=function(o){e.currentComponentIndex===o?e.setCurrentComponentIndex(-1):(e.setCurrentComponentIndex(o),_(o))},n=function(){B(()=>{const o=r.value;o&&window.scrollTo({top:o.scrollHeight,behavior:"smooth"})})},_=function(o){B(()=>{const m=t.value[o];m instanceof HTMLElement&&m.scrollIntoView({behavior:"smooth",block:"center"})})};N.on("scrollToBottom",n),N.on("scrollToCenter",_);function c(o){G.confirm("是否确定删除此模块？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.removeCom(o),e.setCurrentComponentIndex(-1),L({type:"success",message:"已删除"})}).catch(()=>{console.log("取消删除")})}function v(){e.setCurrentComponentIndex(-1)}return(o,m)=>{const R=b("el-button");return u(),d("div",{ref_key:"centerContainer",ref:r,class:"center-container"},[s(a(U),{modelValue:a(e).coms,"onUpdate:modelValue":m[0]||(m[0]=C=>a(e).coms=C),"item-key":"index",onStart:v},{item:S(({element:C,index:f})=>[(u(),d("div",{class:k(["content mb-10 relative",{active:a(e).currentComponentIndex===f}]),onClick:I=>p(f),key:C.id,ref:I=>t.value[f]=I},[(u(),D(j(C.type),{status:C.status,serialNum:i.value[f]},null,8,["status","serialNum"])),z(l("div",ne,[s(R,{type:"danger",class:"ml-10",size:"small",icon:a(W),circle:"",onClick:A(I=>c(f),["stop"])},null,8,["icon","onClick"])],512),[[O,a(e).currentComponentIndex===f]])],10,oe))]),_:1},8,["modelValue"])],512)}}}),ae=g(se,[["__scopeId","data-v-368ea658"]]),re={key:0,class:"content flex justify-content-center align-items-center"},ce={key:1},ie=h({__name:"RightSide",setup(x){const e=w(),i=y(()=>e.coms[e.currentComponentIndex]);return(r,t)=>(u(),d("div",{class:"right-side-container",onWheel:t[0]||(t[0]=p=>a(H)(p))},[a(e).currentComponentIndex===-1?(u(),d("div",re," 点击题型进行编辑 ")):(u(),d("div",ce,[s(F,{com:i.value},null,8,["com"])]))],32))}}),le=g(ie,[["__scopeId","data-v-67c7b563"]]),ue={class:"header"},me={class:"container"},de=h({__name:"Index",setup(x){const e=w();e.initStore();const i=T(),r=y(()=>i.params.id?String(i.params.id):void 0);r.value&&J(Number(r.value)).then(n=>{n&&(K(n.coms),e.setStore(n))});const t=(n,_,c)=>{if(e.currentComponentIndex===-1){L({message:"请先将组件处于编辑状态",type:"warning"});return}const v=e.coms[e.currentComponentIndex].status;X(e,v,n,_,c)};return E("updateStatus",t),E("getPicLink",n=>{t("options",n)}),(n,_)=>(u(),d("div",null,[l("div",ue,[s(Q,{isEditor:!0,id:r.value},null,8,["id"])]),l("div",me,[s(te),s(le)]),l("div",null,[s(ae)])]))}}),xe=g(de,[["__scopeId","data-v-fcf3236e"]]);export{xe as default};
