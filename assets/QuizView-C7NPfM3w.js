import{d as y,J as p,y as w,bj as b,S as f,c as r,b as c,a0 as C,F as N,X as h,a as k,w as z,T as S,D as g,Q as V,r as A,o,j as B,B as T,k as j,_ as q}from"./index-CorONKRg.js";import{u as x}from"./hooks-pbYTGw1V.js";import"./material-BFAZqrzv.js";const D={key:0},Q={class:"quiz-container mc"},I={class:"mt-30 mb-20"},J={class:"mt-20 mb-20 text-center"},O=y({__name:"QuizView",setup(E){const u=g(),t=p({coms:[],surveyCount:0}),i=p({}),l=w(()=>{var e;return x((e=t.value)==null?void 0:e.coms).value});b(async()=>{const e=u.params.id,s=await(await fetch(`/api/getQuiz/${e}`)).json();s.coms=JSON.parse(s.coms),f(s.coms),t.value=s});const d=(e,a)=>{const s=l.value[e];s!==null?i.value[s]=a:console.error(`The serial number at index ${e} is null.`)},_=async()=>{const e=u.params.id;await fetch("/api/submitAnswers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quizId:e,answers:i.value})}),V({message:"答案已提交",type:"success"})};return(e,a)=>{const s=A("el-button");return t.value?(o(),r("div",D,[c("div",Q,[c("div",I,"题目数量："+C(t.value.surveyCount),1),(o(!0),r(N,null,h(t.value.coms,(m,n)=>(o(),r("div",{class:"content mb-10",key:n},[(o(),B(T(m.type),{status:m.status,serialNum:l.value[n],onUpdateAnswer:v=>d(n,v)},null,40,["status","serialNum","onUpdateAnswer"]))]))),128)),c("div",J,[k(s,{type:"primary",onClick:_},{default:z(()=>a[0]||(a[0]=[j("提交答案")])),_:1})])])])):S("",!0)}}}),$=q(O,[["__scopeId","data-v-022d0b17"]]);export{$ as default};
